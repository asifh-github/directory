<!DOCTYPE html>
<head>
    <title>QuickQook-Admin: Posts</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/admin">QuickQook</a>
        <div class="container-fluid">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/admin_users">Users</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/admin_posts">Posts</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/admin">Updates</a>
            </li>
          </ul>
          <ul class="navbar-nav navbar-right">
            <li class="nav-item">
              <button class="nav-link btn btn-outline-light" type="button" onclick="location.href='/logout'">
                Logout
              </button>
            </li> 
          </ul>
        </div>
    </nav>
    <header class="container">
        <h2 class="text-center text-muted font-weight-light font-italic">
          QQ: Table of Posts
        </h2>
        <h5 class="text-center text-muted font-weight-light ">
            <%= posts.length %> Rows
        </h5>
    </header>
    <main class="container-lg text-center">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Post ID</th>
                <th scope="col">Post Name</th>
                <th scope="col">Post Email</th>
                <th scope="col">Post Likes</th>
                <th scope="col">Allow</th>
            </tr>
            </thead>
            <tbody>
            <% posts.forEach(function(r, i) { %>
            <tr>
                <th scope="row"> <%= i+1 %></th>
                <td><%= r.postid %></td>
                <td> <%= r.postname %></td>
                <td><%= r.postby %></td>
                <td><%= r.postlikes %></td>
                <td> 
                  <form id = "blockPostForm" action="/blockPost" method="post">
                    <input type="hidden" name="blockedId" value="<%= r.postid%>" />
                    <%if(r.validpost == true) {%>
                      <label for="blockStatus"></label><input type="hidden" name = "blockStatus" value="Restrict">
                      <input type = "submit" value = "Restrict" style="background-color: red; color: white;"> 
                    <%} else {%>
                      <label for="blockStatus"></label><input type="hidden" name = "blockStatus" value="Allow">
                      <input type = "submit" value = "Allow" style="background-color: green; color: white"> 
                    <%}%>
                </form>
              </td>
                <td>-</td>
            </tr>
            <% }); %>
            </tbody>
        </table>
    </main>
    <footer></footer>
</body>
</html>