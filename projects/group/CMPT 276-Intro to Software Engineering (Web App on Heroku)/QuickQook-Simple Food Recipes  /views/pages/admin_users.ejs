<!DOCTYPE html>
<head>
    <title>QuickQook-Admin: Users</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/admin">QuickQook</a>
        <div class="container-fluid">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" href="/admin_users">Users</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/admin_posts">Posts</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/admin">Updates</a>
            </li>
          </ul>
          <ul class="navbar-nav navbar-right">
            <li class="nav-item">
              <button class="nav-link btn btn-outline-light" type="button" onclick="location.href='/logout'">
                Logout
              </button>
            </li> 
          </ul>
        </div>
    </nav>
    <header class="container">
        <h2 class="text-center text-muted font-weight-light font-italic">
          QQ: Table of Users
        </h2>
        <h5 class="text-center text-muted font-weight-light ">
            <%= users.length %> Rows
        </h5>
      </header>
      <main class="container-lg text-center">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">Email</th>
                <th scope="col">Posts</th>
                <th scope="col">Access</th>
            </tr>
            </thead>
            <tbody>
            <% users.forEach(function(r, i) { %>
            <tr>
                <th scope="row"><%= i+1 %></th>
                <td><%= r.fname %></td>
                <td><%= r.lname %></td>
                <td><%= r.email %></td>
                <td><%= r.count %></td>
                <td>
                    <form id="form1" method="post" action="/blockUser">
                        <input type="hidden" name="blockedEmail" value="<%= r.email%>" />
                        <%if(r.valid === true) {%>
                          <label for="blockStatus"></label><input type="hidden" name = "blockStatus" value="block">
                          <input type = "submit" value = "Block" style="background-color: red; color: white;"> 
                        <%} else {%>
                          <label for="blockStatus"></label><input type="hidden" name = "blockStatus" value="unblock">
                          <input type = "submit" value = "Unblock" style="background-color: green; color: white"> 
                        <%}%>
                    </form>
                </td>
            </tr>
            <% }); %>
            </tbody>
        </table>
      </main>
    <footer></footer>
</body>
</html>