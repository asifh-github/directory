<!DOCTYPE html>
<head>
    <title>QuickQook-Posts</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
</head>
<body onload="user_posts(<%= Object.keys(posts[0]).length %>)">
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/profile">QuickQook</a>
      <div class="container-fluid">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="/profile">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/posts">Posts</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/liked">Liked</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/favourites">Favourites</a>
          </li>
        </ul>
        <ul class="navbar-nav navbar-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <%= posts[0].fname %>
              <%= posts[0].lname %>
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="/profile_update">Update</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="/logout">Logout</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
    <header class="container-md text-center">
        <h2>QQ: Your Posts</h2>
    </header>
    <main>
        <div id="post_fullPage" class="container-fluid text-center">
            <% posts.forEach(function(r) { %>
              <%if(r.validpost == true) {%>
                <div class="post_single card"
                onclick="location.href='/view_post/:<%= r.postid %>'">
                  <div class="post_img">
                    <img src="/images/<%=r.imgtag%>" class="card-img-top" alt="Image Placeholder">
                  </div>
                  <div class="post_info card-body">
                    <h6 class="card-title"><%= r.postname %></h6>
                    <h7 class="card-subtitle text-muted"><%= r.postctime %></h7>
                    <p class="post_info_ingd card-text overflow-hidden"><%= r.postingdlist %></p>
                    <a href="#" class="btn btn-primary">Like</a>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                    </svg>
                    <i class="bi bi-heart-fill"><%= r.postlikes %></i>
                    <p class="post_info_info card-text overflow-hidden"><%= r.postinfo %></p>
                  </div>
                </div>
                <%}%>
            <% }); %>
        </div>
    </main>
    <footer></footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script type="text/javascript" src="main.js"></script>
</body>
</html>
